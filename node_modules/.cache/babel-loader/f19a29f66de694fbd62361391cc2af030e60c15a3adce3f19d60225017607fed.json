{"ast":null,"code":"import { createApp } from 'vue';\nimport App from './App.vue';\nimport { createRouter, createWebHashHistory } from 'vue-router';\nimport store from './store';\nimport axios from 'axios';\nimport ModalLogin from '@/./components/Authorization/ModalLogin.vue';\nimport ModalRegister from '@/./components/Authorization/ModalRegister.vue';\nimport HomeContent from '@/./components/Home/HomeContent.vue';\nimport ProfileContent from '@/./components/Profile/ProfileContent.vue';\nimport SimulationContent from '@/./components/Simulation/SimulationContent.vue';\nconst routes = [{\n  path: '/',\n  component: HomeContent,\n  beforeEnter: () => {\n    if (store.getters.isAuthenticated) {\n      let userId = store.getters.getUserId;\n      if (userId !== undefined && !isNaN(userId) && userId != null) {\n        const promise = axios.get('http://localhost:8080/api/auth/users/' + userId);\n\n        // using .then, create a new promise which extracts the data\n        promise.then(response => {\n          if (response.data == null || response.data === undefined) {\n            store.dispatch('authenticate', {\n              authenticated: false,\n              userId: undefined,\n              username: undefined,\n              email: undefined\n            });\n          } else {\n            const userId = response.data.id;\n            const username = response.data.username;\n            const email = response.data.email;\n            store.dispatch('authenticate', {\n              authenticated: true,\n              userId: userId,\n              username: username,\n              email: email\n            }).catch(() => {\n              store.dispatch('authenticate', {\n                authenticated: false,\n                userId: undefined,\n                username: undefined,\n                email: undefined\n              });\n            });\n          }\n        });\n      }\n    }\n  }\n}, {\n  path: '/sign-in',\n  component: ModalLogin\n}, {\n  path: '/sign-up',\n  component: ModalRegister\n}, {\n  path: '/profile',\n  component: ProfileContent,\n  meta: {\n    requiresAuth: true\n  },\n  beforeEnter: (to, from, next) => {\n    try {\n      if (store.getters.isAuthenticated) {\n        let userId = store.getters.getUserId;\n        if (userId !== undefined && !isNaN(userId) && userId != null) {\n          const promise = axios.get('http://localhost:8080/api/auth/users/' + userId);\n          promise.then(response => {\n            if (response.data == null || response.data === undefined) {\n              store.dispatch('authenticate', {\n                authenticated: false,\n                userId: undefined,\n                username: undefined,\n                email: undefined\n              });\n              next(from);\n            } else {\n              const userId = response.data.id;\n              const username = response.data.username;\n              const email = response.data.email;\n              store.dispatch('authenticate', {\n                authenticated: true,\n                userId: userId,\n                username: username,\n                email: email\n              }).catch(() => {\n                store.dispatch('authenticate', {\n                  authenticated: false,\n                  userId: undefined,\n                  username: undefined,\n                  email: undefined\n                });\n              });\n              next();\n            }\n          });\n        }\n      } else {\n        alert('You need to log in first ðŸ¤“');\n        next('/sign-in');\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}, {\n  path: '/sign-up',\n  component: ModalRegister\n}];\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes\n});\ncreateApp(App).use(router).use(store).mount('#app');","map":{"version":3,"names":["createApp","App","createRouter","createWebHashHistory","store","axios","ModalLogin","ModalRegister","HomeContent","ProfileContent","SimulationContent","routes","path","component","beforeEnter","getters","isAuthenticated","userId","getUserId","undefined","isNaN","promise","get","then","response","data","dispatch","authenticated","username","email","id","catch","meta","requiresAuth","to","from","next","alert","error","console","log","router","history","use","mount"],"sources":["C:/Users/admin/source/repos/COMMAND/CPP_Lab08/src/main.js"],"sourcesContent":["import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport { createRouter, createWebHashHistory } from 'vue-router'\r\nimport store from './store'\r\nimport axios from 'axios';\r\n\r\nimport ModalLogin from '@/./components/Authorization/ModalLogin.vue';\r\nimport ModalRegister from '@/./components/Authorization/ModalRegister.vue';\r\nimport HomeContent from '@/./components/Home/HomeContent.vue';\r\nimport ProfileContent from '@/./components/Profile/ProfileContent.vue';\r\nimport SimulationContent from '@/./components/Simulation/SimulationContent.vue';\r\n\r\nconst routes = [\r\n  {\r\n    path: '/', component: HomeContent,\r\n    beforeEnter: () => {\r\n      if (store.getters.isAuthenticated) {\r\n        let userId = store.getters.getUserId;\r\n\r\n        if (userId !== undefined && !isNaN(userId) && userId != null) {\r\n          const promise = axios.get('http://localhost:8080/api/auth/users/' + userId);\r\n\r\n          // using .then, create a new promise which extracts the data\r\n          promise.then((response) => {\r\n            if (response.data == null || response.data === undefined) {\r\n              store.dispatch('authenticate', {\r\n                authenticated: false,\r\n                userId: undefined,\r\n                username: undefined,\r\n                email: undefined,\r\n              });\r\n            }\r\n            else {\r\n              const userId = response.data.id;\r\n              const username = response.data.username;\r\n              const email = response.data.email;\r\n\r\n              store.dispatch('authenticate', {\r\n                authenticated: true,\r\n                userId: userId,\r\n                username: username,\r\n                email: email,\r\n              }).catch(() => {\r\n                store.dispatch('authenticate', {\r\n                  authenticated: false,\r\n                  userId: undefined,\r\n                  username: undefined,\r\n                  email: undefined,\r\n                });\r\n              })\r\n            }\r\n          })\r\n        }\r\n      }\r\n    }\r\n  },\r\n  { path: '/sign-in', component: ModalLogin },\r\n  { path: '/sign-up', component: ModalRegister },\r\n  {\r\n    path: '/profile',\r\n    component: ProfileContent,\r\n    meta: { requiresAuth: true },\r\n    beforeEnter: (to, from, next) => {\r\n      try {\r\n        if (store.getters.isAuthenticated) {\r\n          let userId = store.getters.getUserId;\r\n\r\n          if (userId !== undefined && !isNaN(userId) && userId != null) {\r\n            const promise = axios.get('http://localhost:8080/api/auth/users/' + userId);\r\n\r\n            promise.then((response) => {\r\n              if (response.data == null || response.data === undefined) {\r\n                store.dispatch('authenticate', {\r\n                  authenticated: false,\r\n                  userId: undefined,\r\n                  username: undefined,\r\n                  email: undefined,\r\n                });\r\n\r\n                next(from);\r\n              }\r\n              else {\r\n                const userId = response.data.id;\r\n                const username = response.data.username;\r\n                const email = response.data.email;\r\n\r\n                store.dispatch('authenticate', {\r\n                  authenticated: true,\r\n                  userId: userId,\r\n                  username: username,\r\n                  email: email,\r\n                }).catch(() => {\r\n                  store.dispatch('authenticate', {\r\n                    authenticated: false,\r\n                    userId: undefined,\r\n                    username: undefined,\r\n                    email: undefined,\r\n                  });\r\n                })\r\n\r\n                next();\r\n              }\r\n            })\r\n          }\r\n\r\n        } else {\r\n          alert('You need to log in first ðŸ¤“');\r\n          next('/sign-in');\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n  },\r\n  { path: '/sign-up', component: ModalRegister },\r\n];\r\n\r\nconst router = createRouter({\r\n  history: createWebHashHistory(),\r\n  routes,\r\n});\r\n\r\n\r\ncreateApp(App)\r\n  .use(router)\r\n  .use(store)\r\n  .mount('#app')\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}